<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>Marcelly</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Homemade+Apple&family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='70'>‚ù§Ô∏è</text></svg>">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: radial-gradient(ellipse at top, #0a1a2f 0%, #030614 100%);
      font-family: 'Poppins', sans-serif;
      color: #f5e9fa;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      position: relative;
      padding: 1rem;
    }
    /* Estrelas */
    .stars-container {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 0; opacity: 0;
      transition: opacity 2s ease;
    }
    .stars-container.reveal { opacity: 1; pointer-events: auto; }
    .stars-container.hide-stars { opacity: 0; pointer-events: none; transition: opacity 1.5s ease; }
    .star-small {
      position: absolute; color: #fffde7; font-size: clamp(10px,3vw,20px);
      animation: twinkle 4s infinite; filter: drop-shadow(0 0 4px #fffaec);
      line-height: 1; pointer-events: none;
    }
    .star-golden {
      position: absolute; font-size: clamp(24px,6vw,40px); color: #fad275;
      filter: drop-shadow(0 0 12px #f5b81b); cursor: pointer; pointer-events: auto;
      animation: floatGold 5s infinite alternate; line-height: 1;
    }
    .star-golden:hover { transform: scale(1.2); }
    .star-golden.clicked { animation: goldenPulse 0.4s 2; }
    .star-golden.read { opacity: 0.2; filter: drop-shadow(0 0 5px #886622); pointer-events: none; }
    @keyframes twinkle {
      0% { opacity: 0.3; transform: scale(0.9); }
      50% { opacity: 1; transform: scale(1.2); }
      100% { opacity: 0.3; transform: scale(0.9); }
    }
    @keyframes floatGold {
      0% { transform: translateY(0px) rotate(0deg); }
      100% { transform: translateY(-8px) rotate(2deg); }
    }
    @keyframes goldenPulse {
      0% { filter: drop-shadow(0 0 12px gold); }
      50% { filter: drop-shadow(0 0 40px #ffaa00); transform: scale(1.3); }
    }
    /* Conte√∫do inicial */
    .main-content {
      position: relative; z-index: 20; max-width: 700px; text-align: center;
      background: rgba(5,10,25,0.25); backdrop-filter: blur(3px); border-radius: 56px;
      padding: 2rem 1.5rem; border: 1px solid rgba(255,215,140,0.2);
    }
    h1 {
      font-family: 'Playfair Display', serif; font-size: clamp(2.5rem,10vw,4rem);
      color: #f9f2e0; text-shadow: 0 0 15px #dbb87c; margin-bottom: 0.5rem;
    }
    .subtitle {
      font-size: clamp(1rem,4vw,1.3rem); color: #ded1e6; max-width: 500px;
      margin: 0 auto 2rem; font-style: italic; background: rgba(0,0,0,0.2);
      padding: 0.5rem 1.2rem; border-radius: 50px;
    }
    .btn-descobrir {
      background: rgba(255,240,200,0.12); border: 1.5px solid #f3d9a4; color: #fef6e3;
      font-size: 1.1rem; padding: 0.8rem 2.5rem; border-radius: 60px; cursor: pointer;
      transition: all 0.3s; opacity: 0; animation: fadeInUp 1s ease forwards 2s;
    }
    .btn-descobrir.hidden { display: none; }
    /* Contagem regressiva */
    .countdown-screen {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.85); backdrop-filter: blur(12px); z-index: 200;
      display: flex; align-items: center; justify-content: center;
      opacity: 0; visibility: hidden; transition: opacity 0.6s ease;
    }
    .countdown-screen.active { opacity: 1; visibility: visible; }
    .countdown-number {
      font-size: 7rem; font-family: 'Playfair Display', serif; color: #ffefcf;
      text-shadow: 0 0 40px gold; animation: countdownPulse 1s infinite;
    }
    @keyframes countdownPulse {
      0% { transform: scale(0.9); opacity: 0.7; }
      100% { transform: scale(1.4); opacity: 1; }
    }
    /* Pergaminho principal */
    .scroll-overlay {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); z-index: 300;
      display: flex; align-items: center; justify-content: center;
      opacity: 0; visibility: hidden; transition: opacity 0.8s ease; padding: 1.5rem;
    }
    .scroll-overlay.show { opacity: 1; visibility: visible; }
    .scroll-paper {
      max-width: 600px; background: #fcf2db;
      background-image: linear-gradient(145deg, #ecd9b4, #f7e5c2);
      padding: 2.5rem 2rem; border-radius: 24px 40px;
      box-shadow: 0 30px 40px -15px black, 0 0 0 1px #8b6f4c inset;
      animation: floatPaper 5s infinite ease-in-out;
      border: 12px solid transparent;
      border-image: repeating-linear-gradient(45deg, #8b6f4c 0px, #8b6f4c 4px, #c9af87 4px, #c9af87 8px) 30 stretch;
    }
    @keyframes floatPaper {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }
    .declaration-text {
      font-family: 'Caveat', cursive; font-size: clamp(1.5rem,5vw,2.2rem);
      color: #2e241a; line-height: 1.5; text-shadow: 1px 1px 0 #b49a6e;
    }
    .declaration-text span { display: inline; opacity: 0; animation: typeIn 0.05s forwards; }
    @keyframes typeIn { to { opacity: 1; } }
    /* Modal vers√≠culos */
    .modal-overlay {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); z-index: 400;
      display: flex; align-items: center; justify-content: center;
      opacity: 0; visibility: hidden; transition: 0.3s; padding: 1.5rem;
    }
    .modal-overlay.show { opacity: 1; visibility: visible; }
    .modal-paper {
      max-width: 450px; background: #f7e9cf;
      background-image: linear-gradient(145deg, #e7d4b5, #f3e2c3);
      padding: 2rem 1.8rem; border-radius: 24px 40px;
      box-shadow: 0 30px 35px -10px black;
      border: 8px solid transparent;
      border-image: repeating-linear-gradient(45deg, #7a603e 0px, #7a603e 3px, #ab8b5c 3px, #ab8b5c 6px) 20 stretch;
      font-family: 'Caveat', cursive; color: #251f17;
    }
    .modal-paper h3 {
      font-size: 2rem; font-family: 'Homemade Apple', cursive;
      border-bottom: 2px dashed #ab8b5c; margin-bottom: 1rem;
    }
    .modal-verse { font-size: 1.5rem; margin-bottom: 1.8rem; }
    .btn-fechar {
      background: #ab8b5c; border: none; color: #fcf0dd; font-size: 1.2rem;
      padding: 0.4rem 2rem; border-radius: 40px; font-family: 'Caveat', cursive;
      cursor: pointer; box-shadow: 0 4px 0 #5e4a30;
    }
    .btn-fechar:active { transform: translateY(4px); box-shadow: none; }
    /* Ca√ßa-palavras */
    .wordsearch-overlay {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(5,5,15,0.95); backdrop-filter: blur(6px); z-index: 500;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      opacity: 0; visibility: hidden; transition: opacity 0.8s ease; padding: 1rem;
      overflow-y: auto;
    }
    .wordsearch-overlay.show { opacity: 1; visibility: visible; }
    .wordsearch-container {
      background: #1a1f2e; border: 2px solid #c1a057; border-radius: 48px;
      padding: 1.8rem 1.2rem; max-width: 550px; width: 100%;
      box-shadow: 0 20px 40px black;
    }
    .wordsearch-title { font-family: 'Playfair Display', serif; color: #eedbba; font-size: 2rem; margin-bottom: 0.5rem; text-align: center; }
    .grid-table { margin: 1rem auto; border-collapse: collapse; background: #252b3d; border-radius: 20px; overflow: hidden; }
    .grid-table td {
      width: 38px; height: 38px; text-align: center; font-size: 1.3rem;
      font-weight: 500; color: #f9e9c2; border: 1px solid #4e4f6e;
      cursor: pointer; user-select: none; font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
    }
    .grid-table td.selected { background: #dbb86b; color: #1c1b2a; border-radius: 8px; }
    .grid-table td.found { background: #4a6b5c; color: #e9f0d0; text-decoration: line-through 2px #ffd966; pointer-events: none; }
    .grid-table td.magic-highlight {
      background: #f5cb5c;
      color: #1a1528;
      border: 2px solid gold;
      box-shadow: 0 0 20px gold;
      transform: scale(1.1);
      z-index: 10;
      position: relative;
    }
    .word-list {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem 1.5rem;
      margin: 1.5rem 0 0.5rem; padding: 1rem; background: #0b0f1a;
      border-radius: 60px; border: 1px solid #a68b5a;
    }
    .word-item { font-family: 'Caveat', cursive; font-size: 1.6rem; color: #f7e3b1; transition: 0.2s; }
    .word-item.found-word { opacity: 0.2; text-decoration: line-through 2px #ffb347; pointer-events: none; }
    
    /* TELA ESCURA DO EU TE AMO (APENAS BOT√ÉO FECHAR) */
    .dark-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 900;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.8s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .dark-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .eu-te-amo-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3rem;
    }
    
    .eu-te-amo-letters {
      font-family: 'Homemade Apple', cursive;
      font-size: clamp(3rem, 15vw, 6rem);
      color: #f5cb5c;
      text-shadow: 0 0 30px gold, 0 0 60px #ffaa00;
      letter-spacing: 10px;
      animation: pulse 2s infinite;
      text-align: center;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.9; }
    }
    
    .close-btn {
      background: transparent;
      border: 2px solid #f5cb5c;
      color: #f5cb5c;
      font-size: 1.5rem;
      padding: 1rem 3rem;
      border-radius: 60px;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Poppins', sans-serif;
      font-weight: 300;
      letter-spacing: 2px;
    }
    .close-btn:hover {
      background: #f5cb5c;
      color: black;
      transform: scale(1.05);
    }
    
    /* TELA DO V√çDEO FULLSCREEN */
    .video-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.8s ease;
      background: black;
    }
    .video-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .video-overlay video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* BOT√ÉO FLUTUANTE DE M√öSICA */
    .music-float {
      position: fixed;
      bottom: 25px;
      right: 20px;
      z-index: 100;
      background: #1e2638;
      border: 1px solid #a99260;
      border-radius: 60px;
      padding: 0.6rem 1.2rem;
      backdrop-filter: blur(8px);
      display: flex;
      gap: 0.8rem;
      align-items: center;
      box-shadow: 0 5px 20px rgba(0,0,0,0.6);
      color: #fdeacb;
    }
    .music-float button {
      background: none;
      border: none;
      color: #ffddb0;
      font-size: 1.5rem;
      cursor: pointer;
      width: 40px; height: 40px;
      border-radius: 50%;
      background: rgba(255,215,130,0.1);
      transition: 0.2s;
    }
    .music-float button:hover {
      background: #bfa26b;
      color: black;
    }
    
    /* Estilo para letras flutuantes */
    .floating-letter {
      position: fixed;
      z-index: 2000;
      width: 42px;
      height: 42px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      font-weight: 500;
      font-family: 'Poppins', sans-serif;
      background: #f5cb5c;
      color: #1a1528;
      border: 2px solid gold;
      box-shadow: 0 0 30px gold;
      border-radius: 4px;
      transition: all 1.2s cubic-bezier(0.2, 0.9, 0.3, 1.2);
      pointer-events: none;
    }
    
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <!-- CONTAINER DE ESTRELAS -->
  <div class="stars-container" id="starsContainer"></div>
  
  <!-- TELA INICIAL -->
  <div class="main-content">
    <h1>Marcelly Eduarda</h1>
    <div class="subtitle">"Mesmo nas noites mais escuras, Deus continua escrevendo hist√≥rias de luz."</div>
    <button class="btn-descobrir" id="btnDescobrir">Descobrir algo especial</button>
  </div>

  <!-- CONTAGEM REGRESSIVA -->
  <div class="countdown-screen" id="countdownScreen">
    <div class="countdown-number" id="countdownNumber">3</div>
  </div>

  <!-- PERGAMINHO PRINCIPAL (DECLARA√á√ÉO) -->
  <div class="scroll-overlay" id="scrollOverlay">
    <div class="scroll-paper">
      <div class="declaration-text" id="declarationText"></div>
    </div>
  </div>

  <!-- MODAL DOS VERS√çCULOS -->
  <div class="modal-overlay" id="verseModal">
    <div class="modal-paper">
      <h3 id="modalTitle">Romanos 8:39</h3>
      <div class="modal-verse" id="modalVerse"></div>
      <button class="btn-fechar" id="closeModalBtn">Fechar</button>
    </div>
  </div>

  <!-- CA√áA-PALAVRAS -->
  <div class="wordsearch-overlay" id="wordsearchOverlay">
    <div class="wordsearch-container">
      <div class="wordsearch-title">‚ú® ca√ßa-palavras ‚ú®</div>
      <div id="wordGrid" style="display: flex; justify-content: center;"></div>
      <div class="word-list" id="wordList"></div>
      <div style="color: #cbae7a; margin: 0.5rem;">clique na primeira e na √∫ltima letra</div>
    </div>
  </div>

  <!-- TELA ESCURA DO EU TE AMO (COM BOT√ÉO FECHAR) -->
  <div class="dark-overlay" id="darkOverlay">
    <div class="eu-te-amo-container">
      <div class="eu-te-amo-letters">EU TE AMO</div>
      <button class="close-btn" id="closeBtn">FECHAR</button>
    </div>
  </div>

  <!-- TELA DO V√çDEO LO-FI (ARQUIVO lo-fi.mp4) -->
  <div class="video-overlay" id="videoOverlay">
    <video id="lofiVideo" loop autoplay muted playsinline>
      <source src="lo-fi.mp4" type="video/mp4">
      Seu navegador n√£o suporta v√≠deos.
    </video>
  </div>

  <!-- BOT√ÉO FLUTUANTE DE M√öSICA -->
  <div class="music-float">
    <span style="opacity:0.8;">‚ô´</span>
    <button id="playPauseBtn">‚ñ∂Ô∏è</button>
    <audio id="bgMusic" loop preload="none">
      <source src="music.mp3" type="audio/mp3">
    </audio>
  </div>

  <script>
    (function() {
      // ---------- CRIA√á√ÉO DAS ESTRELAS ----------
      const starsContainer = document.getElementById('starsContainer');
      
      // 110 estrelas pequenas
      for (let i = 0; i < 110; i++) {
        const s = document.createElement('div');
        s.className = 'star-small'; 
        s.innerHTML = '‚òÖ';
        s.style.left = Math.random() * 100 + '%'; 
        s.style.top = Math.random() * 100 + '%';
        s.style.fontSize = (Math.random() * 16 + 8) + 'px';
        s.style.animationDelay = Math.random() * 5 + 's';
        starsContainer.appendChild(s);
      }

      // 3 estrelas douradas (vers√≠culos)
      const versiculos = [
        {ref:'Romanos 8:39', texto:'Nem altura, nem profundidade, nem qualquer outra criatura poder√° separar-nos do amor de Deus, que est√° em Cristo Jesus.'},
        {ref:'Jo√£o 3:16', texto:'Porque Deus amou o mundo de tal maneira que deu o seu Filho unig√™nito, para que todo o que nele cr√™ n√£o pere√ßa, mas tenha a vida eterna.'},
        {ref:'Jo√£o 16:33', texto:'Tenho-vos dito estas coisas para que em mim tenhais paz; no mundo tereis tribula√ß√µes, mas tende bom √¢nimo, eu venci o mundo.'}
      ];
      
      const goldPos = [
        {left:'12%', top:'18%'},
        {left:'78%', top:'25%'},
        {left:'45%', top:'72%'}
      ];
      
      const bigStars = [];
      
      versiculos.forEach((v, i) => {
        const g = document.createElement('div');
        g.className = 'star-golden'; 
        g.innerHTML = '‚òÖ';
        g.style.left = goldPos[i].left; 
        g.style.top = goldPos[i].top;
        g.dataset.ref = v.ref; 
        g.dataset.verse = v.texto; 
        g.dataset.index = i;
        starsContainer.appendChild(g); 
        bigStars.push(g);
      });

      // ---------- MODAL DOS VERS√çCULOS ----------
      const modal = document.getElementById('verseModal');
      const modalTitle = document.getElementById('modalTitle');
      const modalVerse = document.getElementById('modalVerse');
      const closeModal = document.getElementById('closeModalBtn');
      let starsRead = 0;

      bigStars.forEach(star => {
        star.addEventListener('click', function() {
          if (this.classList.contains('read')) return;
          this.classList.add('clicked'); 
          setTimeout(() => this.classList.remove('clicked'), 400);
          modalTitle.innerText = this.dataset.ref;
          modalVerse.innerText = this.dataset.verse;
          modal.classList.add('show');
          modal.dataset.currentIndex = this.dataset.index;
        });
      });

      function closeModalFunc() {
        const idx = modal.dataset.currentIndex;
        if (idx !== undefined) {
          const s = bigStars[parseInt(idx)];
          if (s && !s.classList.contains('read')) {
            s.classList.add('read'); 
            starsRead++;
            if (starsRead >= 3) {
              starsContainer.classList.add('hide-stars');
              setTimeout(() => showMainScroll(), 1500);
            }
          }
        }
        modal.classList.remove('show');
      }

      closeModal.addEventListener('click', closeModalFunc);
      modal.addEventListener('click', e => { 
        if (e.target === modal) closeModalFunc(); 
      });

      // ---------- PERGAMINHO PRINCIPAL ----------
      const scrollOverlay = document.getElementById('scrollOverlay');
      const declarationText = document.getElementById('declarationText');
      const linhas = [
        "Meu amor por voc√™ est√° firmado na Rocha.",
        "Caminharei ao seu lado nas bonan√ßas e nas",
        "tempestades. Hoje eu prometo diante de Deus:",
        "Quero construir uma fam√≠lia com voc√™, um lar",
        "onde o amor de Cristo brilhe. Nosso pro-",
        "p√≥sito n√£o acaba aqui; ele dura a eternidade.",
        "Mesmo quando o mar se agitar, meu cora√ß√£o",
        "ser√° seu porto. Amor, voc√™ √© a resposta",
        "de Deus para minha vida. Te amo hoje,",
        "amanh√£ e para sempre. üíç"
      ];

      function showMainScroll() {
        if (scrollOverlay.classList.contains('show')) return;
        let html = '';
        linhas.forEach((linha, i) => {
          for (let c of linha) html += `<span>${c === ' ' ? '&nbsp;' : c}</span>`;
          if (i < linhas.length - 1) html += '<br>';
        });
        declarationText.innerHTML = html;
        declarationText.querySelectorAll('span').forEach((s, i) => s.style.animationDelay = i * 0.04 + 's');
        scrollOverlay.classList.add('show');
      }

      scrollOverlay.addEventListener('click', e => {
        if (e.target === scrollOverlay) {
          scrollOverlay.classList.remove('show');
          document.getElementById('wordsearchOverlay').classList.add('show');
          iniciarCa√ßaPalavras();
        }
      });

      // ---------- CA√áA-PALAVRAS ----------
      const palavras = ['MARCELLY', 'PAZ', 'JO√ÉO', 'ROMANOS', 'GRA√áA', 'DEUS', 'FUTURO', 'AMOR'];
      const gridSize = 10;
      let grid = [];
      let palavrasEncontradas = [];
      let firstSel = null;
      const darkOverlay = document.getElementById('darkOverlay');
      const videoOverlay = document.getElementById('videoOverlay');
      const closeBtn = document.getElementById('closeBtn');

      // Posi√ß√µes m√°gicas (formam EU TE AMO)
      const magicPositions = [
        { i: 1, j: 4, letra: 'E' }, // Marc(E)lly
        { i: 4, j: 5, letra: 'U' }, // De(U)s
        { i: 8, j: 6, letra: 'T' }, // Fu(T)uro
        { i: 4, j: 4, letra: 'E' }, // D(E)us
        { i: 0, j: 6, letra: 'A' }, // (A)mor
        { i: 7, j: 3, letra: 'M' }, // Ro(M)anos
        { i: 5, j: 3, letra: 'O' }  // J(O)√£o
      ];

      function criarGrid() {
        for (let i = 0; i < gridSize; i++) { 
          grid[i] = Array(gridSize).fill(''); 
        }

        // Posicionar palavras
        let m = 'MARCELLY';
        for (let c = 0; c < m.length; c++) grid[1][c] = m[c];
        
        grid[3][7] = 'P'; grid[3][8] = 'A'; grid[3][9] = 'Z';
        
        grid[5][2] = 'J'; grid[5][3] = 'O'; grid[5][4] = '√É'; grid[5][5] = 'O';
        
        let r = 'ROMANOS';
        for (let c = 0; c < r.length; c++) grid[7][1 + c] = r[c];
        
        grid[2][5] = 'G'; grid[2][6] = 'R'; grid[2][7] = 'A'; grid[2][8] = '√á'; grid[2][9] = 'A';
        
        grid[4][3] = 'D'; grid[4][4] = 'E'; grid[4][5] = 'U'; grid[4][6] = 'S';
        
        let f = 'FUTURO';
        for (let c = 0; c < f.length; c++) grid[8][4 + c] = f[c];
        
        grid[0][6] = 'A'; grid[0][7] = 'M'; grid[0][8] = 'O'; grid[0][9] = 'R';

        // Preencher espa√ßos vazios com letras aleat√≥rias
        for (let i = 0; i < gridSize; i++) {
          for (let j = 0; j < gridSize; j++) {
            if (grid[i][j] === '') {
              grid[i][j] = String.fromCharCode(65 + Math.floor(Math.random() * 26));
            }
          }
        }
      }

      function renderGrid() {
        const container = document.getElementById('wordGrid');
        let html = '<table class="grid-table" id="gridTable">';
        for (let i = 0; i < gridSize; i++) {
          html += '<tr>';
          for (let j = 0; j < gridSize; j++) {
            html += `<td id="cell-${i}-${j}" data-i="${i}" data-j="${j}">${grid[i][j]}</td>`;
          }
          html += '</tr>';
        }
        html += '</table>';
        container.innerHTML = html;

        document.querySelectorAll('#gridTable td').forEach(cell => {
          cell.addEventListener('click', function() {
            if (this.classList.contains('found')) return;
            let i = parseInt(this.dataset.i), j = parseInt(this.dataset.j);
            if (!firstSel) {
              document.querySelectorAll('.selected').forEach(c => c.classList.remove('selected'));
              this.classList.add('selected');
              firstSel = { i, j };
            } else {
              let i2 = i, j2 = j;
              let i1 = firstSel.i, j1 = firstSel.j;
              let palavra = '';
              let cells = [];

              if (i1 === i2) { // horizontal
                let minJ = Math.min(j1, j2), maxJ = Math.max(j1, j2);
                for (let c = minJ; c <= maxJ; c++) {
                  palavra += grid[i1][c];
                  cells.push({ i: i1, j: c });
                }
              } else if (j1 === j2) { // vertical
                let minI = Math.min(i1, i2), maxI = Math.max(i1, i2);
                for (let r = minI; r <= maxI; r++) {
                  palavra += grid[r][j1];
                  cells.push({ i: r, j: j1 });
                }
              } else {
                document.querySelectorAll('.selected').forEach(c => c.classList.remove('selected'));
                firstSel = null;
                return;
              }

              let palavraUpper = palavra.toUpperCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '');
              let encontrada = palavras.find(p => p.normalize('NFD').replace(/[\u0300-\u036f]/g, '') === palavraUpper);

              if (encontrada && !palavrasEncontradas.includes(encontrada)) {
                palavrasEncontradas.push(encontrada);
                cells.forEach(c => {
                  document.getElementById(`cell-${c.i}-${c.j}`).classList.add('found');
                });
                document.querySelectorAll('.word-item').forEach(el => {
                  let texto = el.innerText.trim().normalize('NFD').replace(/[\u0300-\u036f]/g, '');
                  if (texto === palavraUpper) el.classList.add('found-word');
                });
              }

              document.querySelectorAll('.selected').forEach(c => c.classList.remove('selected'));
              firstSel = null;

              // Se todas as palavras foram encontradas, inicia a m√°gica
              if (palavrasEncontradas.length === palavras.length) {
                setTimeout(() => {
                  iniciarMagia();
                }, 800);
              }
            }
          });
        });
      }

      function iniciarMagia() {
        // Escurece todas as c√©lulas
        document.querySelectorAll('#gridTable td').forEach(cell => {
          cell.style.opacity = '0.15';
          cell.style.transition = 'opacity 0.5s';
        });

        // Destaca as c√©lulas m√°gicas e coleta suas posi√ß√µes
        let magicCells = [];
        magicPositions.forEach((pos, index) => {
          let cell = document.getElementById(`cell-${pos.i}-${pos.j}`);
          if (cell) {
            cell.classList.add('magic-highlight');
            cell.style.opacity = '1';
            
            let rect = cell.getBoundingClientRect();
            magicCells.push({
              element: cell,
              rect: rect,
              letra: cell.innerText,
              ordem: index
            });
          }
        });

        // Cria c√≥pias flutuantes
        let floatingLetters = [];
        magicCells.forEach((item, idx) => {
          let clone = document.createElement('div');
          clone.className = 'floating-letter';
          clone.innerText = item.letra;
          clone.style.left = item.rect.left + 'px';
          clone.style.top = item.rect.top + 'px';
          clone.style.width = item.rect.width + 'px';
          clone.style.height = item.rect.height + 'px';
          clone.style.fontSize = window.getComputedStyle(item.element).fontSize;
          clone.dataset.ordem = item.ordem;
          document.body.appendChild(clone);
          floatingLetters.push(clone);
          
          // Esconde a c√©lula original
          item.element.style.opacity = '0';
        });

        // Ordena por ordem (E, U, T, E, A, M, O)
        floatingLetters.sort((a, b) => a.dataset.ordem - b.dataset.ordem);

        // Anima para o centro
        let centroX = window.innerWidth / 2 - 120;
        let centroY = window.innerHeight / 2 - 20;

        setTimeout(() => {
          floatingLetters.forEach((letter, index) => {
            setTimeout(() => {
              letter.style.left = (centroX + index * 45) + 'px';
              letter.style.top = centroY + 'px';
              letter.style.transform = 'scale(1.3)';
              letter.style.zIndex = '2001';
            }, index * 150);
          });
        }, 500);

        // Ap√≥s a anima√ß√£o, ativa a tela escura com o bot√£o FECHAR
        setTimeout(() => {
          // Remove as letras flutuantes
          floatingLetters.forEach(l => l.remove());
          
          // Ativa a tela escura com EU TE AMO
          darkOverlay.classList.add('active');
        }, 2500);
      }

      function iniciarCa√ßaPalavras() {
        criarGrid();
        renderGrid();
        const wordListDiv = document.getElementById('wordList');
        wordListDiv.innerHTML = '';
        palavras.forEach(p => {
          let span = document.createElement('span');
          span.className = 'word-item';
          span.innerText = p;
          wordListDiv.appendChild(span);
        });
        palavrasEncontradas = [];
        firstSel = null;
      }

      // ---------- BOT√ÉO FECHAR: ABRE O V√çDEO ----------
      closeBtn.addEventListener('click', function() {
        darkOverlay.classList.remove('active');
        videoOverlay.classList.add('active');
        
        // O v√≠deo come√ßa automaticamente (autoplay)
        const video = document.getElementById('lofiVideo');
        video.play().catch(e => console.log('Autoplay bloqueado:', e));
      });

      // ---------- CONTAGEM INICIAL ----------
      const btn = document.getElementById('btnDescobrir');
      const countScreen = document.getElementById('countdownScreen');
      const countNum = document.getElementById('countdownNumber');

      btn.addEventListener('click', function() {
        btn.classList.add('hidden');
        countScreen.classList.add('active');
        let c = 3;
        countNum.innerText = c;
        const i = setInterval(() => {
          c--;
          if (c >= 1) countNum.innerText = c;
          else {
            clearInterval(i);
            countScreen.classList.remove('active');
            starsContainer.classList.add('reveal');
          }
        }, 1000);
      });

      // ---------- M√öSICA FLUTUANTE ----------
      const music = document.getElementById('bgMusic');
      const playBtn = document.getElementById('playPauseBtn');

      playBtn.addEventListener('click', () => {
        if (music.paused) {
          music.play().then(() => {
            playBtn.innerText = '‚è∏Ô∏è';
          }).catch(e => {
            alert('Clique novamente para iniciar a m√∫sica (intera√ß√£o necess√°ria).');
          });
        } else {
          music.pause();
          playBtn.innerText = '‚ñ∂Ô∏è';
        }
      });

      music.addEventListener('ended', () => {
        playBtn.innerText = '‚ñ∂Ô∏è';
      });

    })();
  </script>
</body>

</html>
